
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="ae5ef84f-2e02-58e1-9b5b-8ecf53e4a25c")}catch(e){}}();
(()=>{function e(e,t,o,r){Object.defineProperty(e,t,{get:o,set:r,enumerable:!0,configurable:!0})}var t=globalThis,o={},r={},n=t.parcelRequirece9f;null==n&&((n=function(e){if(e in o)return o[e].exports;if(e in r){var t=r[e];delete r[e];var n={id:e,exports:{}};return o[e]=n,t.call(n.exports,n,n.exports),n.exports}var i=Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){r[e]=t},t.parcelRequirece9f=n);var i=n.register;i("2sVmT",function(e,t){var o=n("2AYtT"),r=n("jyJT5");function i(e){document.dispatchEvent(new CustomEvent("fromContent",{detail:e}))}async function a(){let e=await (0,o.addOverlay)(),t=null;for(;;){var n;try{n=await (0,r.default)(t)}catch(e){break}if(n.errors&&n.errors.length>0&&(await (0,o.timeout)(1e9),i({action:"fetch_error",errors:n.errors}),!1===confirm("Twitter is overloaded with the current request, do you want to keep the current downloaded bookmarks or abort?")?(0,o.abortDownload)():i({action:"finish_download"}),await (0,o.timeout)(5e3)),t=(0,o.getCursor)(n),i({action:"fetch_page",page:n}),2===n.data.bookmark_timeline_v2.timeline.instructions[0].entries.length)break;await (0,o.timeout)(2e3)}i({action:"finish_download"}),setTimeout(()=>{document.body.removeChild(e)},1e3)}n("aHUQb"),document.addEventListener("fromBus",function(e){var t=e.detail;"iconClicked"===t.action?a():"abortConfirm"===t.action?!0===confirm("Do you want to stop the current downloading process?")&&(0,o.abortDownload)():"selectAllBookmarks"===t.action&&document.querySelector('a[href="/i/bookmarks/all"]').click()})}),i("2AYtT",function(t,o){let r;async function n(e){return new Promise(t=>setTimeout(t,e))}function i(e){var t=e.data.bookmark_timeline_v2.timeline.instructions[0].entries;return t[t.length-1].content.value}function a(){chrome.runtime.sendMessage({action:"abort"}),setTimeout(()=>{document.body.removeChild(r)},1e3)}async function s(){(r=document.createElement("div")).style.position="fixed",r.style.top="0",r.style.left="0",r.style.width="100%",r.style.height="100%",r.style.backgroundColor="rgba(0, 0, 0, 0.75)",r.style.zIndex="9999",r.style.display="flex",r.style.alignItems="center",r.style.justifyContent="center";let e=document.createElement("div");e.innerHTML=`
    <svg style="margin-right: 25px; scale: 0.75;" width="65px" height="65px" viewBox="0 0 66 66" xmlns="http://www.w3.org/2000/svg">
      <g>
        <animateTransform attributeName="transform" type="rotate" values="0 33 33;270 33 33" begin="0s" dur="1.4s" fill="freeze" repeatCount="indefinite"/>
        <circle fill="none" stroke-width="6" stroke-linecap="round" cx="33" cy="33" r="30" stroke-dasharray="187" stroke-dashoffset="610">
          <animate attributeName="stroke" values="#4285F4;#DE3E35;#F7C223;#1B9A59;#4285F4" begin="0s" dur="5.6s" fill="freeze" repeatCount="indefinite"/>
          <animateTransform attributeName="transform" type="rotate" values="0 33 33;135 33 33;450 33 33" begin="0s" dur="1.4s" fill="freeze" repeatCount="indefinite"/>
          <animate attributeName="stroke-dashoffset" values="187;46.75;187" begin="0s" dur="1.4s" fill="freeze" repeatCount="indefinite"/>
        </circle>
      </g>
    </svg>
    `,r.appendChild(e);var t=document.createElement("h1");return t.textContent="Downloading... DO NOT close this tab.",t.style.color="#fff",t.style.fontFamily='"TwitterChirp",-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,sans-serif',r.appendChild(t),document.body||await n(500),document.body.appendChild(r),r}e(t.exports,"timeout",()=>n),e(t.exports,"getCursor",()=>i),e(t.exports,"abortDownload",()=>a),e(t.exports,"addOverlay",()=>s)}),i("jyJT5",function(t,o){e(t.exports,"default",()=>n);let r={};window.addEventListener("tbook.ext.bookmarksFetched",e=>{let{cursor:t,response:o}=e.detail;r[t]=o});var n=async function(e){let t="tbook.ext.bookmarksFetched";return new Promise((o,n)=>{let i=setTimeout(()=>{window.removeEventListener(t,a),n(Error("Timeout waiting for cursor"))},2e3),a=r=>{let{cursor:n,response:s}=r.detail;n===e&&(clearTimeout(i),window.removeEventListener(t,a),o(s))};if(r[e]){o(r[e]);return}window.addEventListener(t,a)})}}),i("aHUQb",function(e,t){!function(){let e=window.XMLHttpRequest;window.XMLHttpRequest=function(){let t=new e,o=t.open;return t.open=function(...e){let r=e[1];if(r.includes("Bookmarks")){let e=JSON.parse(new URL(r).searchParams.get("variables")).cursor??null;t.onload=function(){let t=JSON.parse(this.responseText);window.dispatchEvent(new CustomEvent("tbook.ext.bookmarksFetched",{detail:{cursor:e,response:t}}))}}return o.apply(t,e)},t}}()}),n("2sVmT")})();
//# sourceMappingURL=content_v2.e6c621b6.js.map

//# debugId=ae5ef84f-2e02-58e1-9b5b-8ecf53e4a25c
